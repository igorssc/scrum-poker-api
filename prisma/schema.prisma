generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

enum StatusRoom {
  OPEN
  CLOSED
}

model User {
  id          String   @id @default(uuid())
  name        String
  created_at  DateTime @default(now())
  rooms_owner Room[]
  rooms       Member[]

  @@map("users")
}

model Room {
  id         String     @id @default(uuid())
  name       String
  owner_id   String
  created_at DateTime   @default(now())
  status     StatusRoom
  lat        Float?
  lng        Float?
  private    Boolean

  owner   User     @relation(fields: [owner_id], references: [id])
  members Member[]

  @@map("rooms")
}

model Member {
  id        String @id @default(uuid())
  member_id String
  room_id   String

  member User @relation(fields: [member_id], references: [id])
  room   Room @relation(fields: [room_id], references: [id])

  @@map("members")
}
